SUMMARY="Auckland Layout Editor (ALE)"
DESCRIPTION="Auckland Layout Editor (ALE)"
HOMEPAGE="http://github.com/czeidler/ALEditor"
SRC_URI="git://github.com/czeidler/ALEditor#b29909c70ccf6fe7078d267c196d5b03d67b7bff"
COPYRIGHT="Copyright (C) 2009-2014 by UniAuckland Team"
LICENSE="MIT"
REVISION="1"
ARCHITECTURES="x86 x86_gcc2"

PROVIDES="
	lib:libale = $portVersion
	app:ALEditor = $portVersion
	"
REQUIRES="
	haiku >= $haikuVersion
	"
BUILD_REQUIRES="
	haiku >= $haikuVersion
	"
BUILD_PREREQUIRES="
	haiku_devel >= $haikuVersion
	cmd:gcc
	cmd:ld
	cmd:cmake
	cmd:make
	"

BUILD()
{
	cmake .
	make
}

INSTALL()
{
	mkdir -p $appsDir/ALEditor
	cp ALEditor $appsDir/ALEditor/ALEditor
	mkdir -p $libDir
	cp libale.so $libDir/libale.so
	
	mkdir -p $dataDir/deskbar/menu/Applications
	ln -s -f -t $dataDir/deskbar/menu/Applications ../../../../apps/ALEditor/ALEditor
	
	# copy development headers
	headersALE="LayoutArchive.h"
	headersALM="ALMGroup.h ALMLayout.h ALMLayoutBuilder.h Area.h Column.h Row.h Tab.h"
	headersLinearSpec="Constraint.h LinearProgrammingTypes.h LinearSpec.h Summand.h Variable.h"
	
	mkdir -p $includeDir/ale
	for file in $headersALE
	do
	cp headers/editor/${file} $includeDir/ale/${file}
	done
	
	mkdir -p $includeDir/alm
	for file in $headersALM
	do
	cp headers/haiku_private/alm/${file} $includeDir/alm/${file}
	done
	
	mkdir -p $includeDir/linearspec
	for file in $headersLinearSpec
	do
	cp headers/haiku_private/linearspec/${file} $includeDir/linearspec/${file}
	done
	
	# copy example
	mkdir -p $dataDir/ale/example
	cp example/* $dataDir/ale/example/
}
